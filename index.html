<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Registro de Donaciones PCZ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      padding: 2rem;
      color: #333;
    }
    form {
      background: #fff;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      max-width: 500px;
      margin: auto;
    }
    h2 {
      text-align: center;
      color: #5b3cc4;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 1.5rem;
      padding: 0.7rem 1.5rem;
      background-color: #5b3cc4;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background-color: #472c9c;
    }
    .mensaje {
      text-align: center;
      margin-top: 1rem;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>
  <form id="donacionesForm"
        action="https://docs.google.com/forms/d/1BDd7tRy5jLbTJsojE3f8qQx6_MjVBUBJY1Xw-6GgdjM/formResponse"
        method="POST"
        target="hidden_iframe"
        onsubmit="handleSubmit(); return false;">
        
    <h2>Registro de Donaciones PCZ</h2>

    <label>Nombre completo del donador</label>
    <input name="entry.1092686377" id="nombre" required>

    <label>Número de teléfono</label>
    <input name="entry.1406824512" required>

    <label>Población</label>
    <input name="entry.1635357024" id="poblacion" required>

    <label>Cantidad entregada ($)</label>
    <input name="entry.1268789087" type="number" min="1" id="cantidad" required>

    <label>Cantidad prometida por mes ($)</label>
    <input name="entry.848721932" type="number" min="1" required>

    <button type="submit">Enviar donación</button>

    <p class="mensaje" id="mensaje"></p>
  </form>

  <iframe name="hidden_iframe" style="display:none;"></iframe>

  <script>
    async function handleSubmit() {
      const nombre = document.getElementById("nombre").value;
      const cantidad = document.getElementById("cantidad").value;
      const poblacion = document.getElementById("poblacion").value;
      const fecha = new Date().toLocaleString("es-MX");

      let folio = localStorage.getItem("folio_recibo_pcz");
      folio = folio ? parseInt(folio) + 1 : 1;
      localStorage.setItem("folio_recibo_pcz", folio);
      const folioTexto = "PCZ-" + String(folio).padStart(4, "0");

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ orientation: "portrait", unit: "mm", format: [215.9, 110] }); // ligeramente más alto

      const logo = new Image();
      logo.src = "data:image/jpeg;base64,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";

      logo.onload = () => {
        doc.setDrawColor(0, 51, 153);  // azul
        doc.setLineWidth(3);
        doc.rect(3, 3, 209.9, 104);
        doc.setDrawColor(255, 204, 0);  // amarillo
        doc.setLineWidth(3);
        doc.rect(6, 6, 203.9, 98);

        // Logo
        doc.addImage(logo, "JPEG", 170, 8, 35, 35);

        const x = 20;
        let y = 22;
        doc.setTextColor(0, 0, 0);
        doc.setFont("helvetica", "bold");
        doc.setFontSize(18);
        doc.text("RECIBO DE DONACIÓN", x, y);
        y += 12;

        doc.setFontSize(14);
        doc.text("Folio: " + folioTexto, x, y); y += 10;
        doc.text("Nombre del donador: " + nombre, x, y); y += 9;
        doc.text("Población: " + poblacion, x, y); y += 9;
        doc.text("Cantidad entregada: $" + cantidad + " MXN", x, y); y += 9;
        doc.text("Fecha: " + fecha, x, y); y += 12;

        doc.setFont("helvetica", "normal");
        doc.setFontSize(10.5);
        doc.text("Gracias por tu generoso apoyo. Cada peso salva vidas.", 108, 97, null, null, "center");
        doc.text("Zacualpan y pueblos vecinos te lo agradecen.", 108, 104, null, null, "center");

        doc.save(folioTexto + "_" + nombre.replace(/\s+/g, "_") + ".pdf");
        document.getElementById("mensaje").textContent = "✅ Donación registrada correctamente.";
        document.getElementById("donacionesForm").reset();
      };
    }
  </script>
</body>
</html>
